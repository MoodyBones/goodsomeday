# PRD: Interactive Story Submission

## Overview

Replace the placeholder submit page (`/submit`) with an interactive, chat-style story submission experience. A Gemini-powered story coach guides users through telling their career story using motivational interviewing techniques. The interface is mobile-first and resembles a chatbot/messaging UI.

## Two-Agent Architecture

Adapted from the [Steep two-agent arc](https://github.com/MoodyBones/meljonesai/tree/main/.gemini).

### Agent 1: Story Coach (The Inquisitor)

Real-time conversational agent powered by Gemini. Guides the user through 4 story stages using motivational interviewing:

- **Listens** to what the user writes
- **Acknowledges** their experience
- **Reflects back** what they said with slight improvements to structure/tone, keeping their voice
- Moves to the next stage when the user is ready

If the user gets stuck, a **help button** triggers Socratic questioning - the coach asks open-ended questions to help them find their own words rather than providing answers.

### Agent 2: Story Structurer (The Architect)

Post-submission agent that takes the raw conversational input and structures it into the `Story` format for storage. Applies the Grounded Constitution: direct, observation-led, no fluff - but preserves the user's authentic voice.

## User Flow

The conversation is **forward-only** (no going back to previous steps). The experience is anonymous by default - user data is always collected and stored, but identity is only requested if the user opts to make their story public.

### Step 1: Pipeline Stage + Pronouns

User selects when they left (or almost left) the pipeline:
- **Student** - Barriers during education (high school, university)
- **Early Career** - First 0-5 years in the industry
- **Mid-Career** - 5+ years, experienced professionals

Also collects pronouns (used by the coach to address them).

### Step 2: Barrier

Coach prompt guides the user to describe their career barrier. MI techniques: open questions, affirmations, reflections. Coach reflects back what they wrote with slight structural improvements before advancing.

Help button available - triggers Socratic questioning if the user is stuck.

### Step 3: Reflection

Coach guides the user to describe their moment of reflection - what they noticed, what shifted in their thinking.

### Step 4: Action

Coach guides the user to describe what they did next - the concrete action taken.

### Step 5: Transformation

Coach guides the user to describe where they are now - what changed.

### Step 6: Review + Consent + Optional Identity

- Agent 2 structures the full story
- User reviews the structured version
- Consent checkbox for data collection (required)
- **Optional public submission:** If the user wants their story shown publicly, collect name and email here. If not, the story is stored anonymously.
- Submit

## UI Design

- **Mobile-first.** Designed for phone screens, scales up to desktop.
- **Chat interface.** Resembles a messaging app / chatbot UI (like ChatGPT, iMessage).
- **One step at a time.** Only the current step is active. Previous messages scroll up naturally.
- **Coach messages** appear on the left, **user messages** on the right.
- **Help button** is persistent and accessible at any point during steps 2-5 (the coached writing stages).
- **Input area** fixed to bottom of screen (mobile keyboard pattern).
- Uses existing Oolong design tokens (golden `#F9D762` accent, black/white palette).

## Technical Stack

- **Frontend:** Next.js 16, React 19, TypeScript, Tailwind CSS v4, shadcn/ui
- **AI:** Gemini API (real-time conversational responses)
- **Storage:** PostgreSQL (story submissions)
- **Future:** Users can push their Oolong story to Steep as a project

## Data Model (PostgreSQL)

```
story_submissions
├── id (uuid, primary key)
├── pronouns (text, required)
├── pipeline_stage (enum: student | early_career | mid_career)
├── barrier (text)
├── reflection (text)
├── action (text)
├── transformation (text)
├── structured_title (text) — generated by Agent 2
├── is_public (boolean, default false)
├── name (text, nullable) — only collected if user opts for public
├── email (text, nullable) — only collected if user opts for public
├── consent_given (boolean, required)
├── created_at (timestamp)
└── updated_at (timestamp)
```

## Out of Scope (for this issue)

- Push to Steep integration
- User accounts / authentication
- Story moderation / approval workflow
- Publishing stories to the public landing page
- Dark mode for submit page (follow-up)

## Design Principles

- Mobile-first, always
- The coach listens. It does not lecture.
- Motivational interviewing: open questions, affirmations, reflections, summaries (OARS)
- Socratic questioning for help: guide the user to their own answer
- The Grounded Constitution applies: direct, observation-led, no "LinkedIn fluff"
- Keep the user's voice. Improve structure, not identity.
